//*****************************************************************************
//
// オブジェクト2Dリストクラス [object_2d_list.cpp]
//
// Author		: KENJI KABUTOMORI
// Date			: 2014/04/21(Mon)
// Version		: 1.00
// Update Date	: 2014/05/14(Wed)
//
//*****************************************************************************

//*****************************************************************************
// インクルード
//*****************************************************************************
#include "object_2d_list.h"
#include "object_2d.h"

#include "common.h"

//*****************************************************************************
// マクロ定義
//*****************************************************************************

//*****************************************************************************
// プロトタイプ宣言
//*****************************************************************************

//*****************************************************************************
// グローバル変数
//*****************************************************************************

//=============================================================================
// コンストラクタ
//=============================================================================
CObject2DList::CObject2DList(void)
{
	for(int i = 0;i < OBJECT_MAX;i++)
	{
		m_apObject[i] = NULL;
	}
}

//=============================================================================
// デストラクタ
//=============================================================================
CObject2DList::~CObject2DList(void)
{
}

//=============================================================================
// 初期化
//=============================================================================
bool CObject2DList::Init(void)
{
	return true;
}

//=============================================================================
// 終了
//=============================================================================
void CObject2DList::Uninit(void)
{
	for(int i = 0;i < OBJECT_MAX;i++)
	{
		SAFE_RELEASE(m_apObject[i]);
	}
}

//=============================================================================
// 追加
//=============================================================================
int CObject2DList::Add(CObject2D* pObject2D)
{
	int nNumber = -1;

	// 配列の空きを検索
	nNumber = SearchBlank();

	if(nNumber != -1)
	{
		// 配列に登録
		m_apObject[nNumber] = pObject2D;
	}

	// IDを返す
	return nNumber;
}

//=============================================================================
// オブジェクトの取得
//=============================================================================
CObject2D* CObject2DList::GetObject2D(int nNumber)
{
	if(nNumber < 0 || nNumber >= OBJECT_MAX)
	{
		return NULL;
	}

	return m_apObject[nNumber];
}

//=============================================================================
// リフレッシュ
//=============================================================================
void CObject2DList::Refresh(void)
{
	for(int i = 0;i < OBJECT_MAX;i++)
	{
		SAFE_RELEASE(m_apObject[i]);
		//m_apObject[i] = NULL;
	}
}

//=============================================================================
// 配列の空きを検索
//=============================================================================
int CObject2DList::SearchBlank(void)
{
	// 配列をチェック
	for(int i = 0;i < OBJECT_MAX;i++)
	{
		// 空きを発見
		if(m_apObject[i] == NULL)
		{
			return i;
		}
	}

	return -1;
}

//---------------------------------- EOF --------------------------------------
