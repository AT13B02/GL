//*****************************************************************************
//
// オブジェクト2Dバッファクラス
//
// Author		: Kenji Kabutomori
//
//*****************************************************************************

//*****************************************************************************
// インクルード
//*****************************************************************************
#include "object_2d_buffer.h"
#include "object_2d_data.h"

// common
#include "common/common.h"

//*****************************************************************************
// マクロ定義
//*****************************************************************************

//*****************************************************************************
// プロトタイプ宣言
//*****************************************************************************

//*****************************************************************************
// グローバル変数
//*****************************************************************************

//=============================================================================
// コンストラクタ
//=============================================================================
CObject2DBuffer::CObject2DBuffer(void)
{
}

//=============================================================================
// デストラクタ
//=============================================================================
CObject2DBuffer::~CObject2DBuffer(void)
{
}

//=============================================================================
// 初期化
//=============================================================================
bool CObject2DBuffer::Init(void)
{
	return true;
}

//=============================================================================
// 描画
//=============================================================================
void CObject2DBuffer::Draw(CCamera* camera,CTextureManager* texture_manager)
{
	// TODO zソート

	// リストの開始
	for(auto it = object_2d_data_list_.begin();it != object_2d_data_list_.end();++it)
	{
		// カメラのセット
		(*it)->set_camera(camera);

		// テクスチャマネージャの設定
		(*it)->set_texture_manager(texture_manager);

		// モデルマネージャーの設定
		//(*it)->set_model_manager(model_manager);

		// 描画
		(*it)->Draw();
	}
}

//=============================================================================
// 終了
//=============================================================================
void CObject2DBuffer::Uninit(void)
{
	Refresh();
}

//=============================================================================
// 追加
//=============================================================================
void CObject2DBuffer::AddList(CObject2DData* pObject2DData)
{
	// データの追加
	object_2d_data_list_.push_back(pObject2DData);
}

//=============================================================================
// リフレッシュ
//=============================================================================
void CObject2DBuffer::Refresh(void)
{
	// 中身の破棄
	for(auto it = object_2d_data_list_.begin();it != object_2d_data_list_.end();++it)
	{
		SAFE_RELEASE((*it));
	}

	// バッファリストのクリア
	object_2d_data_list_.clear();
}

//---------------------------------- EOF --------------------------------------
