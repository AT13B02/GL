//*****************************************************************************
//
// オブジェクト2Dバッファクラス [object_2d_buffer.cpp]
//
// Author		: KENJI KABUTOMORI
// Date			: 2014/04/21(Mon)
// Version		: 1.00
// Update Date	: 2014/05/14(Wed)
//
//*****************************************************************************

//*****************************************************************************
// インクルード
//*****************************************************************************
#include "object_2d_buffer.h"
#include "object_2d_data.h"
#include "list.h"

#include "common.h"

//*****************************************************************************
// マクロ定義
//*****************************************************************************

//*****************************************************************************
// プロトタイプ宣言
//*****************************************************************************

//*****************************************************************************
// グローバル変数
//*****************************************************************************

//=============================================================================
// コンストラクタ
//=============================================================================
CObject2DBuffer::CObject2DBuffer(void)
{
	m_pList = new CList<CObject2DData*>();
}

//=============================================================================
// デストラクタ
//=============================================================================
CObject2DBuffer::~CObject2DBuffer(void)
{
}

//=============================================================================
// 初期化
//=============================================================================
bool CObject2DBuffer::Init(void)
{
	return true;
}

//=============================================================================
// 描画
//=============================================================================
void CObject2DBuffer::Draw(void)
{
	CObject2DData* pObject2DData = NULL;

	// リストの開始
	m_pList->Begin();

	// バッファリスト分ループ
	while(m_pList->Current() != NULL)
	{
		// リストから取り出す
		pObject2DData = m_pList->Pop();

		// 描画
		pObject2DData->Draw();

		// 次のリストへ
		m_pList->Next();
	}

	Refresh();
}

//=============================================================================
// 終了
//=============================================================================
void CObject2DBuffer::Uninit(void)
{
	Refresh();

	SAFE_RELEASE(m_pList);
}

//=============================================================================
// 追加
//=============================================================================
void CObject2DBuffer::Add(CObject2DData* pObject2DData)
{
	// データの追加
	m_pList->Push(pObject2DData);
}

//=============================================================================
// リフレッシュ
//=============================================================================
void CObject2DBuffer::Refresh(void)
{
	CObject2DData* pObject2DData = NULL;

	// リストの開始
	m_pList->Begin();

	// バッファリスト分ループ
	while(m_pList->Current() != NULL)
	{
		// リストから取り出す
		pObject2DData = m_pList->Pop();

		// データを破棄
		SAFE_RELEASE(pObject2DData);

		// 次のリストへ
		m_pList->Next();
	}

	// バッファリストのリフレッシュ
	m_pList->Refresh();
}

//---------------------------------- EOF --------------------------------------
