//*****************************************************************************
//
// サウンドマネージャークラス [sound_manager.cpp]
//
// Author		: KENJI KABUTOMORI
// Date			: 2014/06/10(Tue)
// Version		: 1.00
// Update Date	: 2014/06/10(Tue)
//
//*****************************************************************************

//*****************************************************************************
// インクルード
//*****************************************************************************
#include "sound_manager.h"

#include "sound.h"
#include "sound_device.h"

#include "common.h"

//*****************************************************************************
// マクロ定義
//*****************************************************************************

//*****************************************************************************
// プロトタイプ宣言
//*****************************************************************************

//*****************************************************************************
// グローバル変数
//*****************************************************************************

//=============================================================================
// デフォルトコンストラクタ
//=============================================================================
CSoundManager::CSoundManager(void)
{
	m_pSoundDevice = new CSoundDevice();
}

//=============================================================================
// デストラクタ
//=============================================================================
CSoundManager::~CSoundManager(void)
{
}

//=============================================================================
// 初期化処理
//=============================================================================
bool CSoundManager::Init(void)
{
	bool bRet;

	bRet = CFileManager::Init();

	INIT(m_pSoundDevice);

	return true;
}

//=============================================================================
// 終了処理
//=============================================================================
void CSoundManager::Uninit(void)
{
	CFileManager::Uninit();

	SAFE_RELEASE(m_pSoundDevice);
}

//=============================================================================
// 作成処理
//=============================================================================
CSound* CSoundManager::Create(const char* pFilename)
{
	CSound* pSound = NULL;

#ifdef _USING_XAUDIO2_
	pSound = CSound::Create(m_pSoundDevice);
#endif

	if(pSound != NULL)
	{
		// 初期化
		pSound->Init();

		// ロード
		pSound->Load(pFilename);

	}

	return pSound;
}

//=============================================================================
// 開放処理
//=============================================================================
void CSoundManager::ReleaseData(CSound* pSound)
{
	SAFE_RELEASE(pSound);
}

//---------------------------------- EOF --------------------------------------
