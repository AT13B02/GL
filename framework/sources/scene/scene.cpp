//*****************************************************************************
//
// シーンクラス
//
// Author		: Kenji Kabutomori
//
//*****************************************************************************

//*****************************************************************************
// インクルード
//*****************************************************************************
#include "scene/scene.h"
#include "scene/factory/scene_factory.h"

#include "common/common.h"

//*****************************************************************************
// マクロ定義
//*****************************************************************************

//*****************************************************************************
// プロトタイプ宣言
//*****************************************************************************

//*****************************************************************************
// グローバル変数
//*****************************************************************************

//=============================================================================
// コンストラクタ
//=============================================================================
CScene::CScene(CInterfaceManager* interface_manager,TYPE scene_type)
{
	// インターフェースマネージャーの設定
	interface_manager_ = interface_manager;

	// シーンタイプの設定
	scene_type_ = scene_type;

	// 次のシーンファクトリーの初期化
	next_scene_ = NULL;

	// 切り替え中フラグの初期化
	changing_flag_ = false;
}

//=============================================================================
// デストラクタ
//=============================================================================
CScene::~CScene(void)
{
}

//=============================================================================
// 初期化
//=============================================================================
bool CScene::Init(void)
{
	// 変更フラグの初期化
	changing_flag_ = false;

	// 次のシーンの初期化
	next_scene_ = NULL;

	return true;
}

//=============================================================================
// 次のシーンの設定
//=============================================================================
bool CScene::set_next_scene(CSceneFactory* next_scene)
{
	if(!changing_flag_)
	{
		// 次のシーンが登録されていない
		if(next_scene_ == NULL)
		{
			next_scene_ = next_scene;
			changing_flag_ = true;
			return true;
		}
	}

	SAFE_DELETE(next_scene);

	return false;
}

//---------------------------------- EOF --------------------------------------
